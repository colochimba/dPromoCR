{"version":3,"sources":["webpack:///./src/app/pago-membresia/pago-membresia.module.ts","webpack:///./src/app/pago-membresia/pago-membresia.page.html","webpack:///./src/app/pago-membresia/pago-membresia.page.scss","webpack:///./src/app/pago-membresia/pago-membresia.page.ts"],"names":[],"mappings":"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","file":"pago-membresia-pago-membresia-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PagoMembresiaPage } from './pago-membresia.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PagoMembresiaPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [PagoMembresiaPage]\n})\nexport class PagoMembresiaPageModule {}\n","module.exports = \"<ion-content center padding class=\\\"bg-image\\\" fullscreen=\\\"true\\\">\\n\\n    <ion-img src=\\\"assets/images/logo-dpromocr.png\\\"></ion-img>\\n    <div text-center>\\n        <h2>Agregar Metodo de Pago</h2>\\n    </div>\\n\\n    <ion-item>\\n\\n        <ion-label position=\\\"floating\\\">Nombre</ion-label>\\n        <ion-input type=\\\"text\\\"></ion-input>\\n    </ion-item>\\n\\n    <ion-item>\\n\\n        <ion-label position=\\\"floating\\\">Numero de tarjeta</ion-label>\\n        <ion-input type=\\\"number\\\"></ion-input>\\n    </ion-item>\\n\\n    <ion-item>\\n\\n        <ion-label position=\\\"floating\\\">Vence</ion-label>\\n        <ion-input type=\\\"text\\\"></ion-input>\\n    </ion-item>\\n\\n    <ion-item>\\n\\n        <ion-label position=\\\"floating\\\">CVV</ion-label>\\n        <ion-input type=\\\"text\\\"></ion-input>\\n    </ion-item>\\n\\n    <ion-item>\\n        <ion-label>Guardar Tarjeta</ion-label>\\n        <ion-checkbox slot=\\\"end\\\" checked=\\\"true\\\"></ion-checkbox>\\n    </ion-item>\\n\\n\\n    <ion-card class=\\\"welcome-card\\\">\\n        <ion-card-header>\\n            <ion-card-subtitle>Get Started</ion-card-subtitle>\\n            <ion-card-title>PayPal Sample</ion-card-title>\\n            <ion-row>\\n                <ion-col>\\n                    Total Payment\\n                </ion-col>\\n                <ion-col>\\n                    {{currencyIcon}}{{paymentAmount}}\\n                </ion-col>\\n            </ion-row>\\n        </ion-card-header>\\n        <ion-card-content>\\n            <A HREF=\\\"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=TDPSUTK2U83UN\\\">\\n                <IMG SRC=\\\"https://www.paypalobjects.com/es_XC/i/btn/btn_subscribeCC_LG.gif\\\" BORDER=\\\"0\\\">\\n                <img alt=\\\"\\\" border=\\\"0\\\" src=\\\"https://www.sandbox.paypal.com/es_XC/i/scr/pixel.gif\\\" width=\\\"1\\\" height=\\\"1\\\">\\n            </A>\\n        </ion-card-content>\\n    </ion-card>\\n    <ion-button expand=\\\"block\\\" class=\\\"ion-margin-top\\\" padding routerLink=\\\"/\\\">Regresar</ion-button>\\n\\n\\n    <A HREF=\\\"https://www.paypal.com/cgi-bin/webscr?cmd=_subscr-find&alias=8LJ55C43NKS2W\\\">\\n        <IMG SRC=\\\"https://www.paypalobjects.com/es_XC/i/btn/btn_unsubscribe_SM.gif\\\" BORDER=\\\"0\\\">\\n    </A>\\n\\n\\n\\n    <div class=\\\"row col-md-12 align-items-center justify-content-center\\\">\\n\\n        <div class=\\\"col\\\">\\n            <select id=\\\"ddlplan\\\" [(ngModel)]=\\\"planId\\\">  \\n            <option value=\\\"\\\">Select Plan </option>  \\n            <option value=\\\"P-2XF38890MB586901YLW3Z7RA\\\">SINGLE DEVICE MONTHLY </option>   \\n            <option value=\\\"P-3NS34795KB814132ALVTDMKI\\\">Test Daily Plan</option>  \\n          </select></div>\\n        <div class=\\\"col\\\">\\n            <div #paypal></div>\\n        </div>\\n\\n    </div>\\n\\n\\n</ion-content>\"","module.exports = \"ion-content {\\n  --background: url('app-bg.jpg') no-repeat center center / cover;\\n  --color: #fff; }\\n\\nion-item {\\n  --background: transparent !important; }\\n\\nion-button {\\n  --background: #fff;\\n  --color:#DF4A60; }\\n\\na, ion-input, .link, ion-label {\\n  --color: #fff !important;\\n  color: #fff !important;\\n  text-decoration: none; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGVqYW5kcm9hcmNlL0Rlc2t0b3AvTXlQcm9qZWN0cy9kUHJvbW9DUi1tYXN0ZXIvc3JjL2FwcC9wYWdvLW1lbWJyZXNpYS9wYWdvLW1lbWJyZXNpYS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSwrREFBYTtFQUNiLGFBQVEsRUFBQTs7QUFHVjtFQUNFLG9DQUFhLEVBQUE7O0FBR2Y7RUFDRSxrQkFBYTtFQUNiLGVBQVEsRUFBQTs7QUFHVjtFQUNFLHdCQUFRO0VBQ1Isc0JBQXNCO0VBQ3RCLHFCQUFzQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvcGFnby1tZW1icmVzaWEvcGFnby1tZW1icmVzaWEucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWNvbnRlbnR7XG4gIC0tYmFja2dyb3VuZDogdXJsKCcuLi8uLi9hc3NldHMvaW1hZ2VzL2FwcC1iZy5qcGcnKSBuby1yZXBlYXQgY2VudGVyIGNlbnRlciAvIGNvdmVyO1xuICAtLWNvbG9yOiAjZmZmO1xufVxuXG5pb24taXRlbSB7XG4gIC0tYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcbn1cblxuaW9uLWJ1dHRvbiB7XG4gIC0tYmFja2dyb3VuZDogI2ZmZjtcbiAgLS1jb2xvcjojREY0QTYwO1xufVxuXG5hLCBpb24taW5wdXQsIC5saW5rLCBpb24tbGFiZWx7XG4gIC0tY29sb3I6ICNmZmYgIWltcG9ydGFudDtcbiAgY29sb3I6ICNmZmYgIWltcG9ydGFudDtcbiAgdGV4dC1kZWNvcmF0aW9uOiAgbm9uZTtcbn1cbiJdfQ== */\"","import { Component, OnInit, ElementRef, ViewChild } from '@angular/core';\nimport { AuthService } from '../servicios/auth.service';\nimport { User } from '../models/user';\n\ndeclare var paypal; \n\n@Component({\n  selector: 'app-pago-membresia',\n  templateUrl: './pago-membresia.page.html',\n  styleUrls: ['./pago-membresia.page.scss'],\n})\nexport class PagoMembresiaPage implements OnInit {\n  @ViewChild('paypal') paypalElement: ElementRef;\n  paymentAmount: string = '5.99';\n  currency: string = 'USD';\n  currencyIcon: string = '$';\n\n  planId: any;  \n  subcripId: any;  \n  basicAuth = 'Basic QVdaNFhfU1c0eVMyS3JhZVNnZVJXT1RsTk9qYWgzUTZMbTFzalFqa29tZXdJbWt0VUFua1l3c2FTd3NPeW52YmRvajVDNWpzVFNTakNRRy06RUVvaGRWLXNQcU1LeHVMbGdHN0ZOOWJxdlgwOGd6RXNtS2U0N19pclAzOTJFbU85b25GVVBaOTQ4d3poN2RrTXIyZkpHSWo4LUNwajJURUU='\n  constructor(private authService: AuthService) {  }\n   \n\n  ngOnInit() {\n    const self = this;  \n    this.planId = 'P-46H56521AR410470DLW33APQ';  //Default Plan Id\n    paypal.Buttons({  \n      createSubscription: function (data, actions) {  \n        return actions.subscription.create({  \n          'plan_id': self.planId,  \n        });  \n      },  \n      onApprove: function (data, actions) {  \n        console.log(data);  \n        alert('Se ha creado la suscripci√≥n satisfactoriamente ' + data.subscriptionID);  \n        self.getSubcriptionDetails(data.subscriptionID);  \n        this.authService.currentUser.active = true; //this has to be saved to the DB when the payment is successfull\n      },  \n      onCancel: function (data) {  \n        // Show a cancel page, or return to cart  \n        console.log(data);  \n      },  \n      onError: function (err) {  \n        // Show an error page here, when an error occurs  \n        console.log(err);  \n      }  \n  \n    }).render(this.paypalElement.nativeElement);  \n  }\n\n  getSubcriptionDetails(subcriptionId) {  \n    const xhttp = new XMLHttpRequest();  \n    xhttp.onreadystatechange = function () {  \n      if (this.readyState === 4 && this.status === 200) {  \n        console.log(JSON.parse(this.responseText));  \n        alert(JSON.stringify(this.responseText));  \n      }  \n    };  \n    xhttp.open('GET', 'https://api.sandbox.paypal.com/v1/billing/subscriptions/' + subcriptionId, true);  \n    xhttp.setRequestHeader('Authorization', this.basicAuth);  \n  \n    xhttp.send();  \n  }  \n\n  makePayment(){\n    \n  }\n}\n\n  /*payWithPaypal() {\n    console.log(\"Pay ????\");\n    this.payPal.init({\n          PayPalEnvironmentProduction: 'YOUR_PRODUCTION_CLIENT_ID',\n          PayPalEnvironmentSandbox: 'AWZ4X_SW4yS2KraeSgeRWOTlNOjah3Q6Lm1sjQjkomewImktUAnkYwsaSwsOynvbdoj5C5jsTSSjCQG-'\n        }).then(() => {\n    // Environments: PayPalEnvironmentNoNetwork, PayPalEnvironmentSandbox, PayPalEnvironmentProduction\n    this.payPal.prepareToRender('PayPalEnvironmentSandbox', new PayPalConfiguration({\n    // Only needed if you get an \"Internal Service Error\" after PayPal login!\n    //payPalShippingAddressOption: 2 // PayPalShippingAddressOptionPayPal\n          })).then(() => {\n    let payment = new PayPalPayment(this.paymentAmount, this.currency, 'Monthly subscription to DpromoCR', 'subscription');\n    this.payPal.renderSinglePaymentUI(payment).then((res) => {\n    console.log(res);\n    // Successfully paid\n    // Example sandbox response\n    //\n    // {\n    //   \"client\": {\n    //     \"environment\": \"sandbox\",\n    //     \"product_name\": \"PayPal iOS SDK\",\n    //     \"paypal_sdk_version\": \"2.16.0\",\n    //     \"platform\": \"iOS\"\n    //   },\n    //   \"response_type\": \"payment\",\n    //   \"response\": {\n    //     \"id\": \"PAY-1AB23456CD789012EF34GHIJ\",\n    //     \"state\": \"approved\",\n    //     \"create_time\": \"2016-10-03T13:33:33Z\",\n    //     \"intent\": \"sale\"\n    //   }\n    // }\n            }, () => {\n    // Error or render dialog closed without being successful\n            });\n          }, () => {\n    // Error in configuration\n          });\n        }, () => {\n    // Error in initialization, maybe PayPal isn't supported or something else\n        });\n      }\n\n\n      \n      \n\n}\n\n\n/**********\n * var billingPlanAttribs = {\n  name: 'Subscripci√≥n mensual a dPromoCR: Standard',\n  description: 'Plan mensual para obtener las promociones de nuestros negocios asociados.',\n  type: 'fixed',\n  payment_definitions: [{\n    name: 'Standard Plan',\n    type: 'REGULAR',\n    frequency_interval: '1',\n    frequency: 'MONTH',\n    cycles: '11',\n    amount: {\n      currency: 'USD',\n      value: '5.99'\n    }\n  }],\n  merchant_preferences: {\n    setup_fee: {\n      currency: 'USD',\n      value: '1'\n    },\n    cancel_url: 'http://localhost:3000/cancel',\n    return_url: 'http://localhost:3000/processagreement',\n    max_fail_attempts: '0',\n    auto_bill_amount: 'YES',\n    initial_fail_amount_action: 'CONTINUE'\n  }\n};\n\n\n\npaypal.billingPlan.create(billingPlanAttribs, function (error, billingPlan){\n  var billingPlanUpdateAttributes;\n\n  if (error){\n    console.error(JSON.stringify(error));\n    throw error;\n  } else {\n    // Create billing plan patch object\n    billingPlanUpdateAttributes = [{\n      op: 'replace',\n      path: '/',\n      value: {\n        state: 'ACTIVE'\n      }\n    }];\n\n    // Activate the plan by changing status to active\n    paypal.billingPlan.update(billingPlan.id, billingPlanUpdateAttributes, function(error, response){\n      if (error){\n        console.error(JSON.stringify(error));\n        throw error;\n      } else {\n        console.log('Billing plan created under ID: ' + billingPlan.id);\n      }\n    });\n  }\n});\n\n\n\nvar billingPlan = \"1234567890\";\nvar billingAgreementAttributes;\nvar isoDate = new Date();\n\nisoDate.setSeconds(isoDate.getSeconds() + 4);\nisoDate.toISOString().slice(0, 19) + 'Z';\n\nbillingAgreementAttributes = {\n  name: 'Standard Membership',\n  description: 'Food of the World Club Standard Membership',\n  start_date: isoDate,\n  plan: {\n    id: billingPlan\n  },\n  payer: {\n    payment_method: 'paypal'\n  },\n  shipping_address: {\n    line1: 'W 34th St',\n    city: 'New York',\n    state: 'NY',\n    postal_code: '10001',\n    country_code: 'US'\n  }\n};\n\n\n\nvar links = {};\n\n// Use activated billing plan to create agreement\npaypal.billingAgreement.create(billingAgreementAttributes, function (error, billingAgreement){\n  if (error){\n    console.error(JSON.stringify(error));\n    throw error;\n  } else {\n    // Capture HATEOAS links\n    billingAgreement.links.forEach(function(linkObj){\n      links[linkObj.rel] = {\n        href: linkObj.href,\n        method: linkObj.method\n      };\n    })\n\n    // If redirect url present, redirect user\n    if (links.hasOwnProperty('approval_url')){\n      //REDIRECT USER TO links['approval_url'].href\n    } else {\n      console.error('no redirect URI present');\n    }\n  }\n});\n\n\n\n\nvar token = req.query.token;\n\npaypal.billingAgreement.execute(token, {}, function (error, billingAgreement){\n  if (error){\n    console.error(JSON.stringify(error));\n    throw error;\n  } else {\n    console.log(JSON.stringify(billingAgreement));\n    console.log('Billing Agreement Created Successfully');\n  }\n});\n\n\n ***********/\n"],"sourceRoot":""}